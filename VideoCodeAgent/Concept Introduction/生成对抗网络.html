<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generative Adversarial Network Explained</title>
    <style>
        /* --- Basic Setup --- */
        body,
        html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #F8F9FA;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- Main Container for 2K Aspect Ratio --- */
        #container {
            width: 100vw;
            height: 56.25vw;
            /* 16:9 Aspect Ratio */
            max-width: 2560px;
            max-height: 1440px;
            min-width: 1024px;
            min-height: 576px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            background-color: #FFFFFF;
        }

        #canvas {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }

        /* --- Subtitles Styling --- */
        #subtitles {
            position: absolute;
            bottom: 5%;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            text-align: center;
            pointer-events: none;
        }

        #subtitles p {
            margin: 0;
            padding: 5px 15px;
            display: inline-block;
            background-color: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 8px;
            font-size: 1.5vw;
            /* Responsive font size */
            line-height: 1.5;
            opacity: 0;
            /* Initially hidden */
        }

        #subtitle-cn {
            color: #343A40;
            font-weight: 500;
        }

        #subtitle-en {
            color: #868E96;
            font-size: 1.2vw;
            margin-top: 5px;
        }

        /* Responsive font size for smaller screens */
        @media (max-width: 1280px) {
            #subtitles p {
                font-size: 18px;
            }

            #subtitle-en {
                font-size: 15px;
            }
        }
    </style>
</head>

<body>

    <div id="container">
        <svg id="canvas" viewBox="0 0 2560 1440">
            <!-- Defs for gradients and filters -->
            <defs>
                <linearGradient id="genGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#A5D8FF;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#74C0FC;stop-opacity:1" />
                </linearGradient>
                <linearGradient id="discGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#B2F2BB;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#8CE99A;stop-opacity:1" />
                </linearGradient>
                <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur stdDeviation="15" result="coloredBlur" />
                    <feMerge>
                        <feMergeNode in="coloredBlur" />
                        <feMergeNode in="SourceGraphic" />
                    </feMerge>
                </filter>
            </defs>

            <!-- Main Title -->
            <g id="main-title" opacity="0">
                <text x="1280" y="650" font-size="90" font-weight="300" text-anchor="middle" fill="#495057">Generative
                    Adversarial Network</text>
                <text x="1280" y="750" font-size="100" font-weight="600" text-anchor="middle"
                    fill="#343A40">生成对抗网络</text>
            </g>

            <!-- Scene 1: The Goal -->
            <g id="goal-group" opacity="0">
                <path id="q-mark" fill="none" stroke="#ADB5BD" stroke-width="15" stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M1180 620 Q 1280 480, 1380 620 Q 1280 760, 1280 800 L 1280 850 M 1280 920 L 1280 921" />
                <path id="cat-outline" fill="none" stroke="#495057" stroke-width="15" stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M1100,850 C1050,750 1100,600 1200,600 C1250,600 1280,630 1280,630 C1280,630 1310,600 1360,600 C1460,600 1510,750 1460,850 C1410,950 1150,950 1100,850 Z M1200,600 C1170,550 1200,500 1230,550 M1360,600 C1390,550 1360,500 1330,550"
                    opacity="0" />
            </g>

            <!-- Main GAN Diagram Components -->
            <g id="diagram-group" opacity="0">
                <!-- Generator -->
                <g id="generator-group" transform="translate(0, 0)">
                    <rect x="400" y="520" width="400" height="400" rx="20" fill="url(#genGradient)" />
                    <text x="600" y="480" font-size="45" font-weight="500" text-anchor="middle"
                        fill="#1C7ED6">Generator</text>
                    <text x="600" y="980" font-size="45" font-weight="500" text-anchor="middle"
                        fill="#1C7ED6">生成器</text>
                    <g id="gen-icon" transform="translate(600, 720) scale(1.2)">
                        <!-- Brain Icon -->
                        <path fill="#fff"
                            d="M0-60c-22,0-40,18-40,40v15c-11,0-20,9-20,20s9,20,20,20v15c0,22,18,40,40,40s40-18,40-40v-15c11,0,20-9,20-20s-9-20-20-20v-15c0-22-18-40-40-40z M-20-10c5.5,0,10,4.5,10,10s-4.5,10-10,10s-10-4.5-10-10s4.5-10,10-10z M20-10c5.5,0,10,4.5,10,10s-4.5,10-10,10s-10-4.5-10-10s4.5-10,10-10z M0,60c-11,0-20-9-20-20s9-20,20-20s20,9,20,20s-9,20-20,20z" />
                        <!-- Paintbrush -->
                        <path fill="#fff" d="M50-50 l20,20 l-30,30 l-20-20z M45-55 l-10,10 l5,5 l10-10z" />
                    </g>
                </g>

                <!-- Discriminator -->
                <g id="discriminator-group" transform="translate(0, 0)">
                    <rect x="1760" y="520" width="400" height="400" rx="20" fill="url(#discGradient)" />
                    <text x="1960" y="480" font-size="45" font-weight="500" text-anchor="middle"
                        fill="#2F9E44">Discriminator</text>
                    <text x="1960" y="980" font-size="45" font-weight="500" text-anchor="middle"
                        fill="#2F9E44">判别器</text>
                    <g id="disc-icon" transform="translate(1960, 720) scale(1.2)">
                        <!-- Eye Icon -->
                        <path fill="#fff"
                            d="M0,0 C-50,-50 -80,-30 -80,0 C-80,30 -50,50 0,0 C50,50 80,30 80,0 C80,-30 50,-50 0,0 Z" />
                        <circle fill="#343A40" cx="0" cy="0" r="20" />
                        <!-- Magnifying Glass -->
                        <circle fill="none" stroke="#fff" stroke-width="12" cx="30" cy="-30" r="40" />
                        <line stroke="#fff" stroke-width="12" x1="60" y1="0" x2="85" y2="25" stroke-linecap="round" />
                    </g>
                </g>

                <!-- Noise -->
                <g id="noise-group" opacity="0">
                    <circle cx="150" cy="720" r="5" fill="#ADB5BD" />
                    <circle cx="180" cy="750" r="3" fill="#CED4DA" />
                    <circle cx="120" cy="690" r="4" fill="#868E96" />
                    <circle cx="200" cy="700" r="5" fill="#ADB5BD" />
                    <circle cx="130" cy="760" r="3" fill="#CED4DA" />
                    <circle cx="170" cy="680" r="4" fill="#868E96" />
                    <text x="160" y="820" font-size="30" text-anchor="middle" fill="#868E96">Random Noise</text>
                    <text x="160" y="860" font-size="30" text-anchor="middle" fill="#868E96">随机噪声</text>
                </g>

                <!-- Real Data -->
                <g id="real-data-group" opacity="0">
                    <g transform="translate(2350, 720) scale(0.6)">
                        <rect x="-100" y="-120" width="200" height="240" rx="10" fill="#E9ECEF"
                            transform="rotate(-5)" />
                        <rect x="-100" y="-120" width="200" height="240" rx="10" fill="#F8F9FA" transform="rotate(5)" />
                        <rect x="-100" y="-120" width="200" height="240" rx="10" fill="#fff" stroke="#DEE2E6"
                            stroke-width="4" />
                        <path fill="#495057"
                            d="M-60,50 C-80,20 -70,-30 -40,-50 C-20,-60 20,-60 40,-50 C70,-30 80,20 60,50 C40,80 -40,80 -60,50 Z M-40,-50 C-50,-70 -30,-80 -20,-70 M40,-50 C50,-70 30,-80 20,-70" />
                        <circle cx="-25" cy="-10" r="8" fill="#495057" />
                        <circle cx="25" cy="-10" r="8" fill="#495057" />
                        <path fill="none" stroke="#495057" stroke-width="5"
                            d="M0,10 C-10,20 -15,20 -20,15 M0,10 C10,20 15,20 20,15" stroke-linecap="round" />
                    </g>
                    <text x="2350" y="850" font-size="30" text-anchor="middle" fill="#868E96">Real Images</text>
                    <text x="2350" y="890" font-size="30" text-anchor="middle" fill="#868E96">真实图像</text>
                </g>

                <!-- Generated Cat Images -->
                <g id="cat-images" transform="translate(1280, 720)">
                    <!-- Cat V1: Blurry Blob -->
                    <path id="cat-v1" opacity="0" fill="#CED4DA"
                        d="M-100,80 C-150,-20 -50,-120 50,-100 C150,-80 150,50 100,80 C50,110 -50,110 -100,80Z"
                        filter="url(#glow)" />
                    <!-- Cat V2: Sketch -->
                    <path id="cat-v2" opacity="0" fill="none" stroke="#868E96" stroke-width="8" stroke-linecap="round"
                        d="M-80,60 C-120,0 -80,-80 0,-90 C80,-80 120,0 80,60 C40,100 -40,100 -80,60Z M-50,-80 C-70,-110 -20,-120 -10,-90 M50,-80 C70,-110 20,-120 10,-90 M-40,-10 L-20,-10 M40,-10 L20,-10 M0,20 C-20,40 -30,40 -40,30 M0,20 C20,40 30,40 40,30" />
                    <!-- Cat V3: Line Art -->
                    <path id="cat-v3" opacity="0" fill="none" stroke="#495057" stroke-width="10" stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M-90,70 C-140,0 -100,-90 0,-100 C100,-90 140,0 90,70 C50,120 -50,120 -90,70Z M-60,-90 C-80,-130 -30,-140 -20,-100 M60,-90 C80,-130 30,-140 20,-100 M-50,0 C-20,10 -50,30 -60,20 M50,0 C20,10 50,30 60,20 M0,30 C-20,50 -30,50 -40,40 M0,30 C20,50 30,50 40,40 M-10,55 A 10 5 0 0 1 10 55 A 10 5 0 0 1 -10 55" />
                    <!-- Cat V4: Shaded -->
                    <g id="cat-v4" opacity="0">
                        <path fill="#E9ECEF" stroke="#495057" stroke-width="8" stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M-90,70 C-140,0 -100,-90 0,-100 C100,-90 140,0 90,70 C50,120 -50,120 -90,70Z" />
                        <path fill="#fff"
                            d="M-60,-90 C-80,-130 -30,-140 -20,-100 Z M60,-90 C80,-130 30,-140 20,-100 Z" />
                        <circle cx="-40" cy="10" r="12" fill="#495057" />
                        <circle cx="40" cy="10" r="12" fill="#495057" />
                        <path fill="#F1B0B0" d="M-10,55 A 10 5 0 0 1 10 55 A 10 5 0 0 1 -10 55" />
                        <path fill="none" stroke="#495057" stroke-width="5"
                            d="M-50,30 C-20,40 -50,60 -60,50 M50,30 C20,40 50,60 60,50" stroke-linecap="round" />
                    </g>
                </g>

                <!-- Feedback & Judgement -->
                <g id="feedback-group" opacity="0">
                    <path id="feedback-line" d="M1760,720 C1280,720 1280,720 800,720" fill="none" stroke-width="10"
                        stroke="#FA5252" stroke-dasharray="30 30" />
                    <text id="stamp-fake" x="1280" y="740" font-size="120" font-weight="bold" fill="#FA5252"
                        text-anchor="middle" opacity="0" transform="rotate(-15 1280 720)">FAKE</text>
                    <text id="stamp-real" x="1960" y="740" font-size="120" font-weight="bold" fill="#51CF66"
                        text-anchor="middle" opacity="0" transform="rotate(10 1960 720)">REAL</text>
                    <text id="stamp-fifty" x="1960" y="740" font-size="100" font-weight="bold" fill="#495057"
                        text-anchor="middle" opacity="0">50 / 50</text>
                </g>
            </g>

        </svg>

        <div id="subtitles">
            <p id="subtitle-cn"></p>
            <p id="subtitle-en"></p>
        </div>
    </div>

    <!-- GSAP Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script>
        const select = (s) => document.querySelector(s);
        const selectAll = (s) => document.querySelectorAll(s);

        const subtitleCN = select('#subtitle-cn');
        const subtitleEN = select('#subtitle-en');

        const subtitles = [
            { t: 1.5, cn: "想象一下，我们想创造出逼真的图像，比如一只猫。", en: "Imagine we want to create realistic images, like a cat." },
            { t: 6.5, cn: "为了实现这个目标，我们使用两个相互竞争的神经网络：", en: "To do this, we use two competing neural networks:" },
            { t: 9, cn: "一个生成器 (Generator) 和一个判别器 (Discriminator)。", en: "A Generator and a Discriminator." },
            { t: 14, cn: "生成器的工作是从随机噪声开始，尝试伪造图像。", en: "The Generator's job is to create fake images, starting from random noise." },
            { t: 19, cn: "起初，它的作品非常粗糙。", en: "At first, its creations are very crude." },
            { t: 22, cn: "而判别器则是一名专家，它通过学习成千上万张真实图像来训练自己。", en: "The Discriminator, on the other hand, is an expert trained on thousands of real images." },
            { t: 28, cn: "现在，游戏开始了。", en: "Now, the game begins." },
            { t: 30, cn: "判别器会同时看到真实图像和生成器的伪造品。", en: "The Discriminator is shown both the real images and the Generator's fakes." },
            { t: 34, cn: "它能轻易地分辨出哪个是真，哪个是假。", en: "It can easily tell which is real and which is fake." },
            { t: 39, cn: "判别器将“这是假的”这个反馈发送给生成器。", en: "The Discriminator sends feedback to the Generator: 'This is fake'." },
            { t: 43.5, cn: "生成器根据反馈进行学习和改进。", en: "The Generator learns from this feedback and improves." },
            { t: 47, cn: "它创作出一个稍微好一点的伪造品。", en: "It creates a slightly better fake." },
            { t: 50, cn: "这个过程不断重复。生成器变得越来越强...", en: "This process repeats. The Generator gets better and better..." },
            { t: 56, cn: "...判别器也必须变得更聪明，才能跟上。", en: "...and the Discriminator must also get smarter to keep up." },
            { t: 61, cn: "生成器和判别器在竞争中共同进化。", en: "They evolve together through competition." },
            { t: 68, cn: "最终，生成器的作品变得如此逼真...", en: "Eventually, the Generator's creations become so realistic..." },
            { t: 72.5, cn: "...以至于判别器再也无法分辨真伪。", en: "...that the Discriminator can no longer tell the difference." },
            { t: 76, cn: "它的判断准确率接近50%，就像抛硬币一样。", en: "Its accuracy drops to 50%, like a coin flip." },
            { t: 81, cn: "这时，我们就得到了一个非常强大的图像生成器。", en: "At this point, we have a very powerful image generator." },
            { t: 86, cn: "这就是生成对抗网络的核心思想。", en: "This is the core idea of a Generative Adversarial Network." },
            { t: 91, cn: "一个强大的模型，诞生于一场精彩的对抗。", en: "A powerful model, born from an elegant rivalry." },
            { t: 97, cn: "", en: "" }
        ];

        gsap.set("#canvas *", { transformOrigin: "50% 50%" });
        const tl = gsap.timeline({ delay: 1 });

        // Subtitle handling
        function showSubtitle(cn, en) {
            gsap.to([subtitleCN, subtitleEN], {
                opacity: 0, duration: 0.3, onComplete: () => {
                    subtitleCN.innerHTML = cn;
                    subtitleEN.innerHTML = en;
                    gsap.to([subtitleCN, subtitleEN], { opacity: 1, duration: 0.3 });
                }
            });
        }

        subtitles.forEach(sub => {
            tl.call(showSubtitle, [sub.cn, sub.en], sub.t);
        });

        // --- Animation Timeline ---

        // Scene 1: Intro
        tl.to("#main-title", { opacity: 1, duration: 1.5 }, 0);
        tl.to("#main-title", { opacity: 0, duration: 1, scale: 0.9 }, 3);

        // Scene 2: The Goal
        tl.to("#goal-group", { opacity: 1, duration: 0.5 }, 4.5);
        tl.fromTo("#q-mark", { strokeDasharray: 1000, strokeDashoffset: 1000 }, { strokeDashoffset: 0, duration: 2 }, 5);
        tl.to("#q-mark", { opacity: 0, scale: 1.2, duration: 1 }, 7);
        tl.to("#cat-outline", { opacity: 1, duration: 0.5 }, 7.5);
        tl.to("#goal-group", { opacity: 0, duration: 1, scale: 0.9 }, 9);

        // Scene 3: Enter the players
        tl.from("#generator-group", { x: -500, opacity: 0, duration: 1.5, ease: "power2.out" }, 10);
        tl.from("#discriminator-group", { x: 500, opacity: 0, duration: 1.5, ease: "power2.out" }, 10);
        tl.to("#diagram-group", { opacity: 1, duration: 0.1 }, 10);

        // Scene 4: Generator's first try
        tl.to("#discriminator-group", { opacity: 0.3, duration: 0.5 }, 14);
        tl.to("#noise-group", { opacity: 1, duration: 0.5 }, 14.5);
        tl.to("#noise-group", { x: 250, scale: 0.5, opacity: 0, duration: 2, ease: "power1.in" }, 15.5);
        tl.fromTo("#gen-icon", { scale: 1.2 }, { scale: 1.3, repeat: 3, yoyo: true, duration: 0.5 }, 16);
        tl.to("#cat-v1", { opacity: 1, x: 680, duration: 1.5, ease: "power2.out" }, 18);
        tl.to("#cat-v1", { x: 0, duration: 1.5, ease: "circ.inOut" }, 20);

        // Scene 5: Discriminator learns
        tl.to("#generator-group, #cat-v1", { opacity: 0.3, duration: 0.5 }, 22);
        tl.to("#discriminator-group", { opacity: 1, duration: 0.5 }, 22);
        tl.to("#real-data-group", { opacity: 1, duration: 0.5 }, 22.5);
        tl.to("#real-data-group", { x: -590, opacity: 0, duration: 2, ease: "power1.in" }, 24);
        tl.fromTo("#disc-icon", { scale: 1.2 }, { filter: "url(#glow)", scale: 1.3, repeat: 1, yoyo: true, duration: 1 }, 25);
        tl.to("#disc-icon", { filter: "none" }, 27);

        // Scene 6: The Game
        tl.to("#generator-group, #cat-v1", { opacity: 1, duration: 0.5 }, 28);
        tl.to("#real-data-group", { x: 0, opacity: 1, duration: 0.1 }, 28);
        tl.to("#cat-v1", { x: 680, duration: 2, ease: "power1.inOut" }, 31);
        tl.to("#real-data-group", { x: -590, duration: 2, ease: "power1.inOut" }, 31);
        tl.to("#stamp-fake", { opacity: 1, scale: 1.2, duration: 0.3 }, 35);
        tl.to("#stamp-real", { opacity: 1, scale: 1.2, duration: 0.3 }, 35.5);
        tl.to(["#stamp-fake", "#stamp-real"], { opacity: 0, scale: 1, duration: 0.5 }, 37.5);

        // Scene 7: Feedback loop
        tl.to("#feedback-group", { opacity: 1 }, 39);
        tl.fromTo("#feedback-line", { strokeDashoffset: 1500 }, { strokeDashoffset: 0, duration: 2, ease: "power1.in" }, 39.5);
        tl.to("#feedback-line", { strokeDashoffset: -1500, duration: 0 }, 41.5);
        tl.to("#cat-v1", { opacity: 0, scale: 0.8, duration: 0.5 }, 41);

        // --- Loop of improvement ---
        const createLoop = (startTime, catIn, catOut, duration) => {
            tl.fromTo("#gen-icon", { scale: 1.2 }, { scale: 1.3, repeat: 1, yoyo: true, duration: 0.5 }, startTime);
            tl.to(catIn, { opacity: 0, scale: 0.8, duration: 0.5 }, startTime - 0.5);
            tl.to(catOut, { opacity: 1, duration: 1.5, ease: "power2.out" }, startTime + 1);
            tl.to(catOut, { x: 680, duration: duration, ease: "power1.inOut" }, startTime + 2.5);
            tl.to("#stamp-fake", { opacity: 1, scale: 1.1, duration: 0.2 }, startTime + 2.5 + duration);
            tl.to("#stamp-fake", { opacity: 0, scale: 1, duration: 0.3 }, startTime + 3 + duration);
            tl.fromTo("#feedback-line", { strokeDashoffset: 1500 }, { strokeDashoffset: 0, duration: 1.5, ease: "power1.in" }, startTime + 3.5 + duration);
            tl.to("#feedback-line", { strokeDashoffset: -1500, duration: 0 }, startTime + 5 + duration);
        };

        createLoop(44, "#cat-v1", "#cat-v2", 2); // -> V2
        createLoop(51, "#cat-v2", "#cat-v3", 1.5); // -> V3
        createLoop(58, "#cat-v3", "#cat-v4", 1); // -> V4

        // Scene 8: Equilibrium
        tl.fromTo("#gen-icon", { scale: 1.2 }, { scale: 1.3, repeat: 1, yoyo: true, duration: 0.5 }, 65);
        tl.to("#cat-v4", { opacity: 0, scale: 0.8, duration: 0.5 }, 64.5);
        tl.to("#cat-v4", { id: 'final-cat', x: 0, y: -50, scale: 1.5, duration: 2, ease: "power2.out" }, 67); // Rename for final scene
        tl.to("#cat-v4", { x: 680, y: 0, scale: 1, duration: 2.5, ease: "power1.inOut" }, 69);
        tl.fromTo("#disc-icon", { rotation: 0 }, { rotation: 360, duration: 1, repeat: 2 }, 72);
        tl.to("#stamp-fifty", { opacity: 1, duration: 1 }, 74);
        tl.to("#diagram-group", { filter: "url(#glow)", duration: 1.5, ease: "power2.inOut" }, 78);
        tl.to("#diagram-group", { filter: "none", duration: 1.5, ease: "power2.inOut" }, 79.5);

        // Scene 9: Conclusion
        tl.to(["#generator-group", "#discriminator-group", "#feedback-group", "#noise-group", "#real-data-group"], { opacity: 0, duration: 1.5 }, 83);
        tl.to("#cat-v4", { x: 0, y: -100, scale: 2, duration: 2, ease: "back.out(1.7)" }, 84);
        tl.to("#main-title", { y: 900, scale: 0.9, opacity: 1, duration: 2, ease: "power2.out" }, 88);

        // Scene 10: Fade out
        tl.to("#container", { opacity: 0, duration: 2 }, 98);

    </script>

</body>

</html>